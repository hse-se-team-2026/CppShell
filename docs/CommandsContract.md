# Контракт исполняемых команд 

Документ описывает минимальный контракт поведения команд в CppShell: как обрабатываются аргументы, поток ввода/вывода и коды возврата. Он нужен для единообразной реализации и проверки.

## Общие правила
- Аргументы команды задаются при парсинге и передаются как `argv`.
- Входной поток (stdin) — источник байтов во время выполнения; он независим от аргументов.
- Если команда читает stdin, она должна читать до EOF.
- Выходной поток (stdout) — основной канал данных; сообщения об ошибках пишутся в stderr.
- Коды возврата: `0` — успех, `>0` — ошибка выполнения/неверные аргументы.

## Встроенные команды

### `echo`
- Аргументы: произвольный список строк.
- Поведение: печатает аргументы через пробел в stdout и завершает переводом строки.
- Входной поток: не используется.
- Код возврата: `0`.

### `pwd`
- Аргументы: не принимает; наличие аргументов — ошибка.
- Поведение: печатает текущую рабочую директорию в stdout.
- Входной поток: не используется.
- Код возврата: `0` при успехе, `>0` при ошибке получения директории.

### `cat`
- Аргументы: список файлов (0 или больше).
- Поведение:
  - Если аргументов нет — копирует stdin в stdout.
  - Если аргументы есть — последовательно выводит содержимое файлов в stdout.
- Входной поток: используется только при отсутствии аргументов.
- Код возврата: `0` при успехе, `>0` если хотя бы один файл не прочитан.

### `wc`
- Аргументы: список файлов (0 или больше).
- Поведение:
  - Если аргументов нет — считает статистику по stdin.
  - Если аргументы есть — считает статистику по каждому файлу.
- Формат вывода: `<lines> <words> <bytes>` в stdout.
- Входной поток: используется только при отсутствии аргументов.
- Код возврата: `0` при успехе, `>0` если хотя бы один файл не прочитан.

### `exit`
- Аргументы: опциональный код возврата (`0` по умолчанию).
- Поведение: завершает основной цикл интерпретатора (если команда не в pipeline).
- Входной поток: не используется.
- Код возврата: переданный код или `0`.

## Внешние команды
- Любой исполняемый файл, доступный в системе, может быть запущен как внешняя команда.
- Аргументы и окружение передаются как при обычном запуске процесса.
- stdin/stdout/stderr переназначаются согласно pipeline и редиректам.
